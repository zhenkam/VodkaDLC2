<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - VodkaClient</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
    background: #000000;
    color: #fff;
    min-height: 100vh;
}

/* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
nav {
    position: relative;
    z-index: 100;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 60px;
    background: rgba(10, 10, 10, 0.9);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid rgba(40, 40, 40, 0.5);
}

.logo {
    font-size: 24px;
    font-weight: 700;
    letter-spacing: 2px;
    color: #fff;
    text-decoration: none;
}

.btn-back {
    padding: 10px 24px;
    background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
    border: 1px solid rgba(60, 60, 60, 0.5);
    border-radius: 8px;
    color: #fff;
    font-weight: 600;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.3s;
}

.btn-back:hover {
    transform: translateY(-2px);
    background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ */
.cabinet-container {
    max-width: 1200px;
    margin: 60px auto;
    padding: 0 30px;
}

.cabinet-header {
    text-align: center;
    margin-bottom: 60px;
}

.cabinet-header h1 {
    font-size: 48px;
    margin-bottom: 10px;
}

.cabinet-header p {
    color: rgba(255, 255, 255, 0.6);
    font-size: 18px;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ */
.info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
}

.info-card {
    background: rgba(20, 20, 20, 0.8);
    border: 1px solid rgba(60, 60, 60, 0.5);
    border-radius: 12px;
    padding: 30px;
    transition: all 0.3s;
}

.info-card:hover {
    transform: translateY(-5px);
    background: rgba(30, 30, 30, 0.9);
}

.info-card h3 {
    font-size: 14px;
    color: rgba(255, 255, 255, 0.6);
    margin-bottom: 10px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.info-card .value {
    font-size: 32px;
    font-weight: 700;
    color: #fff;
}

/* –°–µ–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ */
.subscription-section {
    background: rgba(20, 20, 20, 0.8);
    border: 1px solid rgba(60, 60, 60, 0.5);
    border-radius: 12px;
    padding: 40px;
    margin-bottom: 40px;
}

.subscription-section h2 {
    font-size: 28px;
    margin-bottom: 20px;
}

.subscription-status {
    display: flex;
    align-items: center;
    gap: 15px;
    padding: 20px;
    background: rgba(255, 50, 50, 0.1);
    border: 1px solid rgba(255, 50, 50, 0.3);
    border-radius: 8px;
    margin-bottom: 20px;
}

.subscription-status.active {
    background: rgba(50, 255, 50, 0.1);
    border-color: rgba(50, 255, 50, 0.3);
}

.status-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: #ff5555;
}

.status-indicator.active {
    background: #55ff55;
}

.btn-buy-subscription {
    padding: 14px 30px;
    background: linear-gradient(135deg, #1a1a1a, #0a0a0a);
    border: 1px solid rgba(60, 60, 60, 0.5);
    border-radius: 8px;
    color: #fff;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: inline-block;
}

.btn-buy-subscription:hover {
    background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
    transform: translateY(-2px);
}

.btn-download-client {
    padding: 14px 30px;
    background: linear-gradient(135deg, #1a4a1a, #0a2a0a);
    border: 1px solid rgba(50, 255, 50, 0.5);
    border-radius: 8px;
    color: #55ff55;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: inline-block;
    margin-left: 15px;
}

.btn-download-client:hover {
    background: linear-gradient(135deg, #2a5a2a, #1a3a1a);
    transform: translateY(-2px);
}

.subscription-buttons {
    display: flex;
    gap: 15px;
    align-items: center;
    flex-wrap: wrap;
}

/* –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */
.logout-section {
    text-align: center;
    margin-top: 40px;
}

.btn-logout {
    padding: 14px 40px;
    background: rgba(255, 50, 50, 0.2);
    border: 1px solid rgba(255, 50, 50, 0.5);
    border-radius: 8px;
    color: #ff5555;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-logout:hover {
    background: rgba(255, 50, 50, 0.3);
    transform: translateY(-2px);
}

/* –ó–∞–≥—Ä—É–∑–∫–∞ */
.loading {
    text-align: center;
    padding: 100px 20px;
    font-size: 24px;
    color: rgba(255, 255, 255, 0.6);
}
</style>
</head>

<body>

<!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
<nav>
    <a href="/" class="logo">VodkaClient</a>
    <div style="display: flex; gap: 15px;">
        <a href="/admin.html" class="btn-back">üî¥ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</a>
        <a href="/" class="btn-back">‚Üê –ù–∞–∑–∞–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</nav>

<!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞ -->
<div class="cabinet-container">
    <div id="loadingMessage" class="loading">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    
    <div id="cabinetContent" style="display: none;">
        <div class="cabinet-header">
            <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
            <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="usernameDisplay"></span>!</p>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ -->
        <div class="info-grid">
            <div class="info-card">
                <h3>–í–∞—à UID</h3>
                <div class="value" id="uidDisplay">-</div>
            </div>
            
            <div class="info-card">
                <h3>–õ–æ–≥–∏–Ω</h3>
                <div class="value" id="loginDisplay">-</div>
            </div>
            
            <div class="info-card">
                <h3>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</h3>
                <div class="value" id="dateDisplay" style="font-size: 20px;">-</div>
            </div>
        </div>

        <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ -->
        <div class="subscription-section">
            <h2>–ü–æ–¥–ø–∏—Å–∫–∞</h2>
            <div class="subscription-status" id="subscriptionStatus">
                <div class="status-indicator"></div>
                <div id="subscriptionText">
                    <strong>–°—Ç–∞—Ç—É—Å:</strong> –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
                </div>
            </div>
            
            <!-- –§–æ—Ä–º–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫–ª—é—á–∞ -->
            <div style="margin-bottom: 20px;">
                <h3 style="font-size: 18px; margin-bottom: 15px;">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á</h3>
                <div style="display: flex; gap: 10px;">
                    <input 
                        type="text" 
                        id="keyInput" 
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ (VDK-XXXXXXXX-XXXXXXXX)"
                        style="flex: 1; padding: 12px 16px; background: rgba(10, 10, 10, 0.8); border: 1px solid rgba(60, 60, 60, 0.5); border-radius: 8px; color: #fff; font-size: 14px;"
                    >
                    <button id="activateKeyBtn" class="btn-buy-subscription" style="margin: 0;">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å</button>
                </div>
                <div id="keyMessage" style="margin-top: 10px; padding: 10px; border-radius: 6px; display: none;"></div>
            </div>
            
            <div class="subscription-buttons">
                <a href="https://t.me/Attack_T1rov" target="_blank" class="btn-buy-subscription">–ö—É–ø–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É</a>
                <a href="#" id="downloadClientBtn" class="btn-download-client" style="display: none;">üì• –°–∫–∞—á–∞—Ç—å –∫–ª–∏–µ–Ω—Ç</a>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ -->
        <div class="logout-section">
            <button class="btn-logout" id="logoutBtn">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
        </div>
    </div>
</div>

<script>
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
async function loadUserData() {
    try {
        const response = await fetch('/api/check-auth');
        const data = await response.json();
        
        if (!data.authenticated) {
            window.location.href = '/';
            return;
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        document.getElementById('usernameDisplay').textContent = data.username;
        document.getElementById('uidDisplay').textContent = data.uid;
        document.getElementById('loginDisplay').textContent = data.username;
        
        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
        if (data.created_at) {
            const date = new Date(data.created_at);
            document.getElementById('dateDisplay').textContent = date.toLocaleDateString('ru-RU');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
        const statusDiv = document.getElementById('subscriptionStatus');
        const statusText = document.getElementById('subscriptionText');
        const downloadBtn = document.getElementById('downloadClientBtn');
        
        if (data.subscription_active) {
            statusDiv.classList.add('active');
            statusDiv.querySelector('.status-indicator').classList.add('active');
            
            if (data.subscription_type === 'lifetime') {
                const expiresDate = new Date(data.subscription_expires).toLocaleDateString('ru-RU');
                statusText.innerHTML = `<strong>–°—Ç–∞—Ç—É—Å:</strong> –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ –Ω–∞–≤—Å–µ–≥–¥–∞ (–¥–æ ${expiresDate})`;
            } else {
                const expiresDate = new Date(data.subscription_expires).toLocaleDateString('ru-RU');
                statusText.innerHTML = `<strong>–°—Ç–∞—Ç—É—Å:</strong> –ü–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ –¥–æ ${expiresDate}`;
            }
            
            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞
            downloadBtn.style.display = 'inline-block';
        } else {
            // –°–∫—Ä—ã—Ç—å –∫–Ω–æ–ø–∫—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –µ—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞
            downloadBtn.style.display = 'none';
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        document.getElementById('loadingMessage').style.display = 'none';
        document.getElementById('cabinetContent').style.display = 'block';
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
        window.location.href = '/';
    }
}

// –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–ª—é—á–∞
document.getElementById('activateKeyBtn').addEventListener('click', async () => {
    const keyCode = document.getElementById('keyInput').value.trim();
    const messageDiv = document.getElementById('keyMessage');
    
    if (!keyCode) {
        messageDiv.style.display = 'block';
        messageDiv.style.background = 'rgba(255, 50, 50, 0.2)';
        messageDiv.style.border = '1px solid rgba(255, 50, 50, 0.5)';
        messageDiv.style.color = '#ff5555';
        messageDiv.textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–ª—é—á –∞–∫—Ç–∏–≤–∞—Ü–∏–∏';
        return;
    }
    
    try {
        const response = await fetch('/api/activate-key', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ key_code: keyCode })
        });
        
        const data = await response.json();
        
        messageDiv.style.display = 'block';
        
        if (data.success) {
            messageDiv.style.background = 'rgba(50, 255, 50, 0.2)';
            messageDiv.style.border = '1px solid rgba(50, 255, 50, 0.5)';
            messageDiv.style.color = '#55ff55';
            messageDiv.textContent = data.message;
            document.getElementById('keyInput').value = '';
            
            // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
            setTimeout(() => {
                loadUserData();
            }, 1000);
        } else {
            messageDiv.style.background = 'rgba(255, 50, 50, 0.2)';
            messageDiv.style.border = '1px solid rgba(255, 50, 50, 0.5)';
            messageDiv.style.color = '#ff5555';
            messageDiv.textContent = data.message;
        }
    } catch (error) {
        messageDiv.style.display = 'block';
        messageDiv.style.background = 'rgba(255, 50, 50, 0.2)';
        messageDiv.style.border = '1px solid rgba(255, 50, 50, 0.5)';
        messageDiv.style.color = '#ff5555';
        messageDiv.textContent = '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è';
    }
});

// –í—ã—Ö–æ–¥
document.getElementById('logoutBtn').addEventListener('click', async () => {
    try {
        await fetch('/api/logout', { method: 'POST' });
        window.location.href = '/';
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞');
    }
});

// –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
document.getElementById('downloadClientBtn').addEventListener('click', (e) => {
    e.preventDefault();
    // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞
    alert('–§—É–Ω–∫—Ü–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ–∑–∂–µ!\n\n–°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞: https://t.me/SmertnixVteste');
    // –ò–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:
    // window.location.href = 'https://example.com/download/vodka-client.exe';
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
loadUserData();
</script>

</body>
</html>
